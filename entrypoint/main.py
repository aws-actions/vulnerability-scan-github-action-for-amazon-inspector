#!/usr/bin/env python3

import os
import sys

from entrypoint import cli
from entrypoint import log_conf
from entrypoint import orchestrator


def is_running_in_github_actions():
    return os.getenv("GITHUB_ACTIONS") == "true"


def main():
    if is_running_in_github_actions():
        # TODO: marshall the inputs from GitHub actions
        print("we are in GitHub actions!")
        return

    # initialize the CLI arguments
    args = cli.init(sys.argv[1:])

    # initialize logger
    if args.verbose:
        log_conf.init(enable_verbose=True)
    else:
        log_conf.init(enable_verbose=False)

    # entrypoint to business logic
    orchestrator.execute(args)


if __name__ == '__main__':
    main()
